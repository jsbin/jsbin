{
  "getBin": "SELECT * FROM \"sandbox\" WHERE \"url\"=$1 AND \"revision\" BETWEEN $2 AND $3 + 1 ORDER BY \"revision\"",
  "getLatestBin": "SELECT * FROM \"sandbox\" WHERE \"url\"=$1 ORDER BY \"revision\" DESC LIMIT 1",
  "setBin": "INSERT INTO \"sandbox\" (\"javascript\", \"css\", \"html\", \"created\", \"last_viewed\", \"url\", \"revision\", \"streaming_key\", \"settings\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING id",
  "setBinPanel": "UPDATE \"sandbox\" SET \":panel\"=$1, \"settings\"=$2, \"created\"=$3 WHERE \"url\"=$4 AND \"revision\"=$5 AND \"streaming_key\"=$6 AND \"streaming_key\"!='' AND \"active\"='y' RETURNING id",
  "binExists": "SELECT id FROM \"sandbox\" WHERE \"url\"=$1 LIMIT 1",
  "getUser": "SELECT * FROM \"ownership\" WHERE \"name\"=$1 LIMIT 1",
  "getUserByGithubId": "SELECT * FROM \"ownership\" WHERE \"github_id\"=$1 LIMIT 1",
  "getUserByApiKey": "SELECT * FROM \"ownership\" WHERE \"api_key\"=$1 LIMIT 1",
  "getByEmail": "SELECT * FROM \"ownership\" WHERE \"email\"=$1 LIMIT 1",
  "setUser": "INSERT INTO \"ownership\" (\"name\", \"key\", \"email\", \"last_login\", \"created\", \"updated\", \"github_token\", \"github_id\", \"flagged\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING id",
  "touchLogin": "UPDATE \"ownership\" SET \"last_login\"=$1 WHERE \"name\"=$2 RETURNING id",
  "updateUserKey": "UPDATE ownership SET \"key\"=$1, \"updated\"=$2 WHERE \"name\"=$3 RETURNING id",
  "updateUserSettings": "UPDATE ownership SET \"settings\"=$1 WHERE \"name\"=$2 RETURNING id",
  "upgradeUserKey": "UPDATE ownership SET \"key\"=$1, \"created\"=$2, \"updated\"=$3 WHERE \"name\"=$4",
  "DATELIMITgetBinsByUser": "SELECT SUBSTR(s.html, 1, 200) as html, SUBSTR(s.javascript, 1, 100) as javascript, SUBSTR(s.css, 1, 100) as css, o.archive, o.last_updated, o.url, o.revision FROM \"owners\" as o, \"sandbox\" as s WHERE o.url=s.url and o.revision=s.revision and o.last_updated>DATE_SUB(NOW(), INTERVAL 6 MONTH) AND o.name=$1",
  "getBinsByUser": "SELECT summary as html, summary as javascript, summary as css, archive, last_updated, url, revision from \"owners\" where name=$1",
  "LIMITgetBinsByUser": "SELECT SUBSTR(s.html, 1, 200) as html, SUBSTR(s.javascript, 1, 100) as javascript, SUBSTR(s.css, 1, 100) as css, o.archive, o.last_updated, o.url, o.revision FROM \"owners\" as o, \"sandbox\" s WHERE o.url=s.url and o.revision=s.revision AND o.name=$1 ORDER BY o.last_updated LIMIT 500",
  "OLDDgetBinsByUser": "SELECT *, \"last_updated\" as \"created\" FROM \"owners\" WHERE \"name\"=$1",
  "getAllOwners": "SELECT * FROM \"owners\"",
  "getOwnersBlock": "SELECT * FROM \"owners\" LIMIT $1, $2",
  "getBinByUrlAndRevision": "SELECT * FROM \"sandbox\" WHERE \"url\"=$1 AND \"revision\"=$2 LIMIT 1",
  "getLatestBinForUser": "SELECT \"url\", \"revision\" FROM \"owners\" WHERE \"name\"=$1 AND \"last_updated\" != 0 AND \"archive\" = 0 ORDER BY \"last_updated\" DESC LIMIT $2,1",
  "setBinOwner": "INSERT INTO \"owners\" (\"name\", \"url\", \"revision\", \"last_updated\", \"summary\", \"html\", \"css\", \"javascript\", \"visibility\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING id",
  "touchOwners": "UPDATE \"owners\" SET \"last_updated\"=$1 WHERE \"name\"=$2 AND \"url\"=$3 AND \"revision\" = $4 RETURNING id",
  "updateOwners": "UPDATE \"owners\" SET \"last_updated\"=$1, \"summary\"=$2, \":panel\"=$3 WHERE \"name\"=$4 AND \"url\"=$5 AND \"revision\" = $6 RETURNING id",
  "populateOwners": "UPDATE \"owners\" SET \"last_updated\"=$1, \"summary\"=$2, \"html\"=$3, \"css\"=$4, \"javascript\"=$5 WHERE \"name\"=$6 AND \"url\"=$7 AND \"revision\" = $8 RETURNING id",
  "archiveBin": "UPDATE \"owners\" SET \"archive\"=$1 WHERE \"name\"=$2 AND \"url\"=$3 AND \"revision\" = $4 RETURNING id",
  "updateUserEmail": "UPDATE ownership SET \"email\"=$1, \"updated\"=$2 WHERE \"name\"=$3 RETURNING id",
  "updateUserGithubData": "UPDATE ownership SET \"github_id\"=$1, \"github_token\"=$2, \"updated\"=$3 WHERE \"name\"=$4 RETURNING id",
  "updateUserDropboxData":"UPDATE ownership SET \"dropbox_token\"=$1, \"updated\"=$2 WHERE \"name\"=$3 RETURNING id",
  "getUserByEmail": "SELECT * FROM \"ownership\" WHERE \"email\"=$1 LIMIT 1",
  "getUserForForgotToken": "SELECT \"ownership\".*, expires FROM \"ownership\" INNER JOIN \"forgot_tokens\" ON \"name\" = \"owner_name\" WHERE \"token\" = $1 AND \"forgot_tokens\".\"expires\" >= $2",
  "setForgotToken": "INSERT INTO \"forgot_tokens\" (\"owner_name\", \"token\", \"expires\", \"created\") VALUES ($1, $2, $3, $4)",
  "deleteExpiredForgotToken": "DELETE FROM \"forgot_tokens\" WHERE \"expires\" <= $1 OR \"token\"=$2 OR \"owner_name\"=$3",
  "reportBin": "UPDATE \"sandbox\" SET \"reported\"=$1, \"active\"='n' WHERE \"url\"=$2 AND \"revision\"=$3 AND \"reported\" IS NULL RETURNING id",
  "updateBinData": "UPDATE \"sandbox\" SET \":field\"=$1 WHERE \"url\"=$2 AND \"revision\"=$3 RETURNING id",
  "updateOwnersData": "UPDATE \"owners\" SET \":field\"=$1 WHERE \"url\"=$2 AND \"revision\"=$3 RETURNING id",
  "updateOwnershipData": "UPDATE \"ownership\" SET \":field\"=$1 WHERE \"name\"=$2 RETURNING id",
  "isOwnerOf": "SELECT name=$1 as \"owner\", s.active FROM \"owners\" AS \"o\", \"sandbox\" AS \"s\" WHERE o.url=s.url AND o.revision=s.revision AND o.url=$2 AND o.revision=1",
  "getUserBinCount": "SELECT COUNT(*) as total FROM \"owners\" WHERE \"name\"=$1 AND archive=0",
  "setProAccount": "UPDATE ownership SET \"pro\"=$1, \"updated\"=$2 WHERE \"name\"=$3 RETURNING id",
  "setCustomer" : "INSERT INTO \"customers\" (\"stripe_id\", \"user_id\", \"name\", \"plan\") VALUES ($1, $2, $3, $4) ON CONFLICT \"user_id\" DO UPDATE SET \"stripe_id\" = $1, \"name\" = $3, \"plan\" = $4",
  "setCustomerActive": "UPDATE \"customers\" SET \"active\"=$1 WHERE \"name\"=$2 RETURNING id",
  "getCustomerByStripeId": "SELECT * FROM \"customers\" WHERE \"stripe_id\"=$1 LIMIT 1",
  "getCustomerByUser": "SELECT * FROM \"customers\" WHERE \"name\"=$1 LIMIT 1",
  "setBinVisibility": "UPDATE \"owners\" SET \"visibility\"=$1 WHERE \"name\"=$2 AND \"url\"=$3 RETURNING id",
  "getBinMetadata": "SELECT * FROM \"owners\" AS \"o\", \"ownership\" AS \"os\" WHERE o.name=os.name AND o.url=$1 AND o.revision=$2",
  "setProAccount": "UPDATE ownership SET \"pro\"=$1, \"updated\"=$2 WHERE \"name\"=$3 RETURNING id",
  "saveBookmark": "INSERT INTO owner_bookmarks (\"name\", \"url\", \"revision\", \"type\", \"created\") VALUES ($1,$2,$3,$4,$5)",
  "getBookmark": "SELECT * FROM owner_bookmarks WHERE \"name\"=$1 AND \"type\"=$2 ORDER BY \"created\" DESC",
  "getAssetsForUser": "SELECT * FROM assets WHERE \"username\"=$1",
  "deleteAsset": "DELETE FROM assets WHERE \"asset_url\"=$1 AND \"username\"=$1",
  "saveAsset": "INSERT INTO assets (\"username\", \"asset_url\", \"size\", \"mime\") VALUES ($1,$2,$3,$4)",
  "userListing": "SELECT s.url, s.revision, s.created, s.settings FROM \"owners\" AS \"o\", \"sandbox\" AS \"s\" WHERE o.name=$1 AND s.revision=o.revision AND s.url=o.url",
  "deleteUser": "DELETE FROM ownership, owners, sandbox USING ownership INNER JOIN owners INNER JOIN sandbox WHERE ownership.name = $1 AND ownership.name = owners.name AND owners.url = sandbox.url AND owners.revision = sandbox.revision",
  "sandboxColumns": [
    "created",
    "last_viewed",
    "url",
    "active",
    "reported",
    "streaming",
    "streaming_key",
    "streaming_read_key",
    "active_tab",
    "active_cursor",
    "//protected revision",
    "css",
    "settings"
  ],
  "ownersColumns": [
    "name",
    "url",
    "//protected revision",
    "last_updated",
    "summary",
    "html",
    "css",
    "javascript",
    "archive",
    "visibility"
  ],
  "ownershipColumns": [
    "// protected name",
    "key",
    "email",
    "api_key",
    "github_token",
    "github_id",
    "last_login",
    "created",
    "updated",
    "pro",
    "settings",
    "embed",
    "// protected id",
    "dropbox_token",
    "domain",
    "verified",
    "dropbox_id",
    "beta",
    "flagged",
    "last_seen"
  ]
}
